{"version":3,"file":"static/chunks/pages/posts/[...slug]-edb86ce02906f06f.js","mappings":"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","sources":["webpack://_N_E/?3980","webpack://_N_E/./pages/posts/[...slug].tsx","webpack://_N_E/./src/components/layout/header.tsx","webpack://_N_E/./src/components/external/tracking-tags.tsx","webpack://_N_E/./src/components/layout/layout.tsx","webpack://_N_E/./src/components/markdown/markdown-article.tsx","webpack://_N_E/./src/components/meta/html-meta.tsx","webpack://_N_E/./src/config/build-env.ts","webpack://_N_E/./src/config/const.ts","webpack://_N_E/./src/config/routes.ts","webpack://_N_E/./src/utils/debug-logger.ts","webpack://_N_E/<anon>"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/posts/[...slug]\",\n      function () {\n        return require(\"private-next-pages/posts/[...slug].tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/posts/[...slug]\"])\n      });\n    }\n  ","import React from 'react';\nimport { GetStaticPaths, GetStaticProps } from 'next';\nimport { Layout } from '../../src/components/layout/layout';\nimport { getMarkdownList, MarkdownMeta, readMarkdownContent } from '../../src/ssr/resolve-markdown-posts';\nimport { HtmlMeta } from '../../src/components/meta/html-meta';\nimport { MarkdownArticle } from '../../src/components/markdown/markdown-article';\n\ninterface RouteParams extends Record<string, string | string[]> {\n  slug: string[];\n}\n\ninterface PageProps {\n  mdMeta: MarkdownMeta;\n  mdContent: string;\n}\n\nconst PostsShowPage: React.FC<PageProps> = (props) => (\n  <Layout>\n    <HtmlMeta title={`${props.mdMeta.frontMatter.title}`} />\n    <MarkdownArticle meta={props.mdMeta} content={props.mdContent} />\n  </Layout>\n);\n\nexport const getStaticPaths: GetStaticPaths<RouteParams> = async () => {\n  const x = await getMarkdownList();\n  return {\n    paths: x.files.map((mdFile) => ({\n      params: {\n        slug: mdFile.slug,\n      } as RouteParams,\n    })),\n    fallback: false,\n  };\n};\n\nexport const getStaticProps: GetStaticProps<PageProps> = async (ctx) => {\n  const query: RouteParams = ctx.params as any;\n  const parsedMarkdown = await readMarkdownContent(query.slug);\n  return {\n    props: {\n      mdMeta: parsedMarkdown.meta,\n      mdContent: parsedMarkdown.content,\n    },\n  };\n};\nexport default PostsShowPage;\n","import React, { PropsWithChildren } from 'react';\nimport classNames from 'classnames';\nimport { useRouter } from 'next/router';\nimport Link from 'next/link';\nimport { TypedRoutes } from '../../config/routes';\nimport { SiteMeta } from '../../config/const';\n\nconst SectionLink: React.FC<PropsWithChildren<{ path: string; className?: string }>> = (props) => {\n  const { pathname } = useRouter();\n  return (\n    <Link href={props.path}>\n      <a\n        className={classNames(props.className ?? '', {\n          ['text-yellow-200']: props.path !== TypedRoutes.index && pathname.startsWith(props.path),\n        })}\n      >\n        {props.children}\n      </a>\n    </Link>\n  );\n};\n\nexport const Header: React.FC = () => {\n  return (\n    <div className=\"px-4 py-1 flex items-center bg-gray-900 space-x-4 text-sm\">\n      <SectionLink className=\"sm:hidden text-lg\" path={TypedRoutes.index}>\n        {SiteMeta.siteTitleShort}\n      </SectionLink>\n      <SectionLink className=\"hidden sm:inline-block text-lg\" path={TypedRoutes.index}>\n        {SiteMeta.siteTitle}\n      </SectionLink>\n      <span>|</span>\n      <SectionLink path={TypedRoutes.posts.index}>/posts</SectionLink>\n      <SectionLink path={TypedRoutes.works}>/works</SectionLink>\n      <SectionLink path={TypedRoutes.about.me}>/about</SectionLink>\n    </div>\n  );\n};\n","import React, { useEffect } from 'react';\nimport { useRouter } from 'next/router';\nimport { buildEnv } from '../../config/build-env';\nimport { createLogger } from '../../utils/debug-logger';\nimport Head from 'next/head';\n\nconst logger = createLogger(__filename);\n\ndeclare function gtag(...args: any[]): void;\n\n/**\n * taken from https://github.com/zeit/next.js/blob/canary/examples/with-google-analytics/pages/_document.js\n * @returns {any}\n * @constructor\n */\nexport const GoogleAnalyticsTag: React.FC = () => {\n  const { GA_TRACKING_ID } = buildEnv;\n  const router = useRouter();\n\n  useEffect(() => {\n    logger('GA_TRACKING_ID', GA_TRACKING_ID);\n    if (GA_TRACKING_ID) {\n      const url = router.asPath;\n      logger('RouteChangeComplete', url);\n      setTimeout(() => {\n        typeof gtag === 'function' &&\n          gtag('config', GA_TRACKING_ID, {\n            page_location: url,\n            page_title: document.title,\n          });\n      }, 0);\n    }\n  }, []);\n\n  return (\n    (GA_TRACKING_ID && (\n      <Head>\n        {/* Global Site Tag (gtag.js) - Google Analytics */}\n        <script async src={`https://www.googletagmanager.com/gtag/js?id=${GA_TRACKING_ID}`} />\n        <script\n          dangerouslySetInnerHTML={{\n            __html: `\n            window.dataLayer = window.dataLayer || [];\n            function gtag(){dataLayer.push(arguments);}\n            gtag('js', new Date());\n            gtag('config', '${GA_TRACKING_ID}', {\n              page_path: window.location.pathname,\n            });\n          `,\n          }}\n        />\n      </Head>\n    )) ||\n    null\n  );\n};\n","import React, { PropsWithChildren, useEffect } from 'react';\nimport { Header } from './header';\nimport { GoogleAnalyticsTag } from '../external/tracking-tags';\n\nexport const Layout: React.FC<PropsWithChildren> = (props) => {\n  return (\n    <div className=\"bg-black text-yellow-100\">\n      <GoogleAnalyticsTag />\n      <div className=\"min-h-screen container mx-auto\">\n        <Header />\n        <div className=\"px-4 pt-6\">{props.children}</div>\n      </div>\n    </div>\n  );\n};\n","import ReactMarkdown from 'react-markdown';\nimport React from 'react';\nimport { Prism } from 'react-syntax-highlighter';\nimport codeStyle from 'react-syntax-highlighter/dist/cjs/styles/prism/atom-dark';\nimport { MarkdownMeta } from '../../ssr/resolve-markdown-posts';\nimport { inServer } from '../../config/build-env';\nimport remarkGfm from 'remark-gfm';\nimport { dark } from 'react-syntax-highlighter/dist/esm/styles/prism';\n\nexport const MarkdownArticle: React.FC<{ title?: string; meta?: MarkdownMeta; content: string }> = ({\n  meta,\n  title,\n  content,\n}) => {\n  return (\n    <div className=\"markdown\" lang={meta?.frontMatter?.lang}>\n      <h1>{title ?? meta?.frontMatter?.lang ?? ''}</h1>\n      <hr />\n      <ReactMarkdown className=\"markdown\" remarkPlugins={[remarkGfm]}>\n        {content}\n      </ReactMarkdown>\n    </div>\n  );\n};\n","import React from 'react';\nimport { SiteMeta } from '../../config/const';\nimport Head from 'next/head';\nimport { useRouter } from 'next/router';\nimport { createLogger } from '../../utils/debug-logger';\n\nconst logger = createLogger(__filename);\nexport const HtmlMeta: React.FC<{ title: string }> = (props) => {\n  /**\n   * TODO: ogp / keywords / etc\n   */\n  const router = useRouter();\n\n  return (\n    <Head>\n      <title>{props.title}</title>\n      <meta httpEquiv=\"X-UA-Compatible\" content=\"IE=edge\" />\n      <meta name=\"viewport\" content=\"width=device-width, initial-scale=1,maximum-scale=1.5,minimum-scale=1\" />\n      <link rel=\"canonical\" href={`${SiteMeta.canonicalOrigin}${router.asPath}`} />\n    </Head>\n  );\n};\n","declare const process: {\n  env: {\n    SOME_CONSTANT: string;\n    NEXT_DEV: boolean;\n    GA_TRACKING_ID: string;\n  };\n};\n\nexport const inBrowser = typeof window !== 'undefined';\nexport const inServer = !inBrowser;\n\nexport const isDevBuild = !!process.env.NEXT_DEV;\n\nexport const buildEnv = {\n  SOME_CONSTANT: process.env.SOME_CONSTANT,\n  GA_TRACKING_ID: process.env.GA_TRACKING_ID || null,\n} as const;\n\nexport type BuildEnv = typeof buildEnv;\n","export const SiteMeta = {\n  canonicalOrigin: `https://jokester.github.io`,\n  siteTitle: `挖坑自動機 / Digging automaton`,\n  siteTitleShort: `挖坑自動機`,\n  siteDesc: 'Posts and works about Web, Android, Linux and stuff.',\n} as const;\n","import { ParsedUrlQuery } from 'querystring';\n\n/**\n * @note MUST have trailing slash\n */\nexport const TypedRoutes = {\n  index: '/',\n  posts: {\n    index: '/posts/',\n    show: (slug: string[]) => `/posts/${slug.join('/')}/`,\n  },\n  works: '/works/',\n  about: {\n    me: '/about/',\n  },\n} as const;\nexport type TypedRouteParam<RouteNode> = RouteNode extends (param: infer Param) => string\n  ? Param & ParsedUrlQuery\n  : never;\n","import debug from 'debug';\nconst repoRoot = __filename.replace(/src[\\\\/]utils[\\\\/].*$/i, '');\n\nexport function createLogger(srcFile: string) {\n  const tag = srcFile\n    .slice(repoRoot.length)\n    .replace(/^src[\\\\/]/i, '')\n    .replace(/[\\\\/]/g, ':');\n  // console.log('createLogger: root', [__dirname, __filename, repoRoot]);\n  // console.log('createLogger: tag', [srcFile, tag]);\n\n  return debug(tag);\n}\n"],"names":["window","__NEXT_P","push","__webpack_require__","__webpack_exports__","props","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsxs","Layout","jsx","HtmlMeta","title","concat","mdMeta","frontMatter","MarkdownArticle","meta","content","mdContent","SectionLink","pathname","useRouter","jsx_runtime","Link","href","path","a","className","classNames","_define_property","Z","TypedRoutes","startsWith","children","Header","div","SiteMeta","span","logger","createLogger","GoogleAnalyticsTag","GA_TRACKING_ID","buildEnv","router","useEffect","url","asPath","setTimeout","gtag","page_location","page_title","document","Head","script","async","src","dangerouslySetInnerHTML","__html","param","lang","h1","hr","ReactMarkdown","remarkPlugins","remarkGfm","httpEquiv","name","link","rel","isDevBuild","SOME_CONSTANT","process","env","canonicalOrigin","siteTitle","siteTitleShort","siteDesc","index","posts","show","slug","join","works","about","me","repoRoot","__filename","replace","srcFile","tag","slice","length","debug"],"sourceRoot":""}