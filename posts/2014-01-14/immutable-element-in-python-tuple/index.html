<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-39627402-1"></script><script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'UA-39627402-1', {
              page_path: window.location.pathname,
            });
          </script><title>Immutable element in Python tuple</title><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1.5,minimum-scale=1"/><link rel="canonical" href="https://jokester.github.io/posts/2014-01-14/immutable-element-in-python-tuple/"/><meta name="next-head-count" content="7"/><link rel="preload" href="/_next/static/css/4aea23cc4ba74f25.css" as="style"/><link rel="stylesheet" href="/_next/static/css/4aea23cc4ba74f25.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-3278669249d12298.js" defer=""></script><script src="/_next/static/chunks/framework-e6d86b677864e3f5.js" defer=""></script><script src="/_next/static/chunks/main-bd374c4482f3a8c9.js" defer=""></script><script src="/_next/static/chunks/pages/_app-f13ade3d405e605a.js" defer=""></script><script src="/_next/static/chunks/782-c0d129453d73cf2f.js" defer=""></script><script src="/_next/static/chunks/503-60468e2aaeee9d33.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5B...slug%5D-0a158f9191a6a0a4.js" defer=""></script><script src="/_next/static/_QvQikHdy6XDN8mZszHK8/_buildManifest.js" defer=""></script><script src="/_next/static/_QvQikHdy6XDN8mZszHK8/_ssgManifest.js" defer=""></script></head><body class="overflow-y-scroll"><div id="__next"><div class="bg-black text-yellow-100"><div class="min-h-screen container mx-auto"><div class="px-4 py-1 flex items-center bg-gray-900 space-x-4 text-sm"><a class="sm:hidden text-lg" href="/">挖坑自動機</a><a class="hidden sm:inline-block text-lg" href="/">挖坑自動機 / Digging automaton</a><span>|</span><a class="text-yellow-200" href="/posts/">/posts</a><a class="" href="/works/">/works</a><a class="" href="/about/">/about</a></div><div class="px-4 pt-6"><div class="markdown"><h1></h1><hr/><div class="markdown"><h4>What</h4>
<p>I found a surprising fact today in <a href="http://stackoverflow.com/q/21105207/327815">this SO post</a>:
<code>tuple</code> in Python turns out to be able to contain mutable objects (I was expecting that they cannot).</p>
<p>Such tuples are not hashable, because being hashable requires being recursively hashable and immutable.
Therefore they <em>cannot</em> be used as key of <code>dict</code>.</p>
<pre><code class="language-python">In [34]: a_tuple=({},)              # No problem

In [35]: a_tuple
Out[35]: ({},)

In [36]: a_dict={ a_tuple: True }   # TypeError: unhashable type: &#x27;dict&#x27;
</code></pre>
<h4>Why</h4>
<p>The same question was inquired in <a href="http://stackoverflow.com/questions/9755990/">this post</a>.</p>
<p>TL;DR of <a href="">the direct answer</a>:
such tuples maintains to be immutable because what it contains is <em>reference</em>,
and reference to a particular object is not mutable.</p>
<p>So, immutability here means the tuple&#x27;s shallow self won&#x27;t be changing.</p>
<p>Long answer from <a href="http://docs.python.org/3.3/reference/datamodel.html#the-standard-type-hierarchy">python doc</a>:</p>
<blockquote>
<p>Immutable sequences (Strings, Tuples, Bytes)</p>
<pre><code>An object of an immutable sequence type cannot change once it is created. (If the object contains references to other objects, these other objects may be mutable and may be changed; however, the collection of objects directly referenced by an immutable object cannot change.)
</code></pre>
<p>Mutable sequences (Strings, Tuples, Bytes)</p>
<pre><code>Mutable sequences can be changed after they are created. The subscription and slicing notations can be used as the target of assignment and del (delete) statements.
</code></pre>
</blockquote>
<h4>More</h4>
<p><a href="http://blogs.msdn.com/b/ericlippert/archive/2007/11/13/immutability-in-c-part-one-kinds-of-immutability.aspx">Immutability in C# Part One: Kinds of Immutability</a> introduces more kinds of <code>mutability</code>.</p></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"mdMeta":{"realpath":"/home/runner/work/jokester.github.io/jokester.github.io/posts/2014/2014-01-14-immutable-element-in-python-tuple.markdown","slug":["2014-01-14","immutable-element-in-python-tuple"],"frontMatter":{"title":"Immutable element in Python tuple","publishAt":"2014-01-14"}},"mdContent":"\n#### What\n\nI found a surprising fact today in [this SO post](http://stackoverflow.com/q/21105207/327815):\n`tuple` in Python turns out to be able to contain mutable objects (I was expecting that they cannot).\n\nSuch tuples are not hashable, because being hashable requires being recursively hashable and immutable.\nTherefore they *cannot* be used as key of `dict`.\n\n~~~ python\nIn [34]: a_tuple=({},)              # No problem\n\nIn [35]: a_tuple\nOut[35]: ({},)\n\nIn [36]: a_dict={ a_tuple: True }   # TypeError: unhashable type: 'dict'\n~~~\n\n#### Why\nThe same question was inquired in [this post](http://stackoverflow.com/questions/9755990/).\n\nTL;DR of [the direct answer]():\nsuch tuples maintains to be immutable because what it contains is *reference*,\nand reference to a particular object is not mutable.\n\nSo, immutability here means the tuple's shallow self won't be changing.\n\nLong answer from [python doc](http://docs.python.org/3.3/reference/datamodel.html#the-standard-type-hierarchy):\n\n\u003e   Immutable sequences (Strings, Tuples, Bytes)\n\u003e\n\u003e     An object of an immutable sequence type cannot change once it is created. (If the object contains references to other objects, these other objects may be mutable and may be changed; however, the collection of objects directly referenced by an immutable object cannot change.)\n\u003e\n\u003e   Mutable sequences (Strings, Tuples, Bytes)\n\u003e\n\u003e     Mutable sequences can be changed after they are created. The subscription and slicing notations can be used as the target of assignment and del (delete) statements.\n\n#### More\n[Immutability in C# Part One: Kinds of Immutability](http://blogs.msdn.com/b/ericlippert/archive/2007/11/13/immutability-in-c-part-one-kinds-of-immutability.aspx) introduces more kinds of `mutability`.\n"},"__N_SSG":true},"page":"/posts/[...slug]","query":{"slug":["2014-01-14","immutable-element-in-python-tuple"]},"buildId":"_QvQikHdy6XDN8mZszHK8","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>